<html>
<head>
<title>SharedPreferenceHelper.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #808080;}
.s4 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
SharedPreferenceHelper.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com.example.coen390assignment1</span><span class="s0">;</span>

<span class="s0">import </span><span class="s1">android.content.Context</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">android.content.SharedPreferences</span><span class="s0">;</span>

<span class="s0">public class </span><span class="s1">SharedPreferenceHelper {</span>
    <span class="s0">private </span><span class="s1">SharedPreferences sharedPreferences</span><span class="s0">;</span>
    <span class="s0">public  </span><span class="s1">SharedPreferenceHelper(Context context){</span>
        <span class="s1">sharedPreferences = context.getSharedPreferences(</span><span class="s2">&quot;EventPreference&quot;</span><span class="s0">, </span><span class="s1">Context.MODE_PRIVATE)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Verify the input max count is within range and add it to the SharedPreference</span>
    <span class="s0">public void </span><span class="s1">saveMaxCount(String max){</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">maxInt = Integer.parseInt(max)</span><span class="s0">;</span>
        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s0">if </span><span class="s1">(maxInt &gt; </span><span class="s4">200</span><span class="s1">){</span>
            <span class="s1">editor.putInt(</span><span class="s2">&quot;maxCount&quot;</span><span class="s0">, </span><span class="s4">200</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else if</span><span class="s1">(maxInt &lt; </span><span class="s4">5</span><span class="s1">){</span>
            <span class="s1">editor.putInt(</span><span class="s2">&quot;maxCount&quot;</span><span class="s0">, </span><span class="s4">5</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else</span><span class="s1">{</span>
            <span class="s1">editor.putInt(</span><span class="s2">&quot;maxCount&quot;</span><span class="s0">, </span><span class="s1">maxInt)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Return the assigned value to maxCount</span>
    <span class="s0">public int </span><span class="s1">getMaxCount() {</span>
        <span class="s0">return </span><span class="s1">sharedPreferences.getInt(</span><span class="s2">&quot;maxCount&quot;</span><span class="s0">, </span><span class="s4">5</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Increment the stored value of totalEvents</span>
    <span class="s0">public void </span><span class="s1">incrementTotalEvents(){</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">value = sharedPreferences.getInt(</span><span class="s2">&quot;totalEvents&quot;</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">value++</span><span class="s0">;</span>

        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s1">editor.putInt(</span><span class="s2">&quot;totalEvents&quot;</span><span class="s0">, </span><span class="s1">value)</span><span class="s0">;</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Return the assigned value of totalEvents, or a default of 0 if not set</span>
    <span class="s0">public int </span><span class="s1">getTotalEvents(){</span>
        <span class="s0">return </span><span class="s1">sharedPreferences.getInt(</span><span class="s2">&quot;totalEvents&quot;</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Save the name of one of the counters</span>
    <span class="s0">public void </span><span class="s1">saveEventName(String name</span><span class="s0">, int </span><span class="s1">eventId){</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s1">editor.putString(getEventType(eventId)</span><span class="s0">, </span><span class="s1">name)</span><span class="s0">;</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Return the name assigned to a counter</span>
    <span class="s0">public </span><span class="s1">String getEventName(</span><span class="s0">int </span><span class="s1">eventId){ </span><span class="s0">return </span><span class="s1">sharedPreferences.getString(getEventType(eventId)</span><span class="s0">, null</span><span class="s1">)</span><span class="s0">; </span><span class="s1">}</span>

    <span class="s3">// Increment the store value of a counter</span>
    <span class="s0">public void </span><span class="s1">incrementEventValue(</span><span class="s0">int </span><span class="s1">eventId) {</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s1">String eventName = getEventCounterName(eventId)</span><span class="s0">;</span>
        <span class="s0">int </span><span class="s1">value = sharedPreferences.getInt(eventName</span><span class="s0">, </span><span class="s4">0 </span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">value++</span><span class="s0">;</span>

        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s1">editor.putInt(eventName</span><span class="s0">, </span><span class="s1">value)</span><span class="s0">;</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Return the assigned value of a counter</span>
    <span class="s0">public int </span><span class="s1">getEventValue(</span><span class="s0">int </span><span class="s1">eventId){</span>
        <span class="s0">return </span><span class="s1">sharedPreferences.getInt(getEventCounterName(eventId)</span><span class="s0">, </span><span class="s4">0</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Returns string of a counters values key</span>
    <span class="s0">private </span><span class="s1">String getEventCounterName(</span><span class="s0">int </span><span class="s1">eventId){</span>
        <span class="s1">String eventCounterName = </span><span class="s0">null;</span>
        <span class="s0">switch </span><span class="s1">(eventId) {</span>
            <span class="s0">case </span><span class="s4">0</span><span class="s1">:</span>
                <span class="s1">eventCounterName = </span><span class="s2">&quot;event1&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s0">case </span><span class="s4">1</span><span class="s1">:</span>
                <span class="s1">eventCounterName = </span><span class="s2">&quot;event2&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s0">case </span><span class="s4">2</span><span class="s1">:</span>
                <span class="s1">eventCounterName = </span><span class="s2">&quot;event3&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">assert </span><span class="s1">eventCounterName != </span><span class="s0">null;</span>
        <span class="s0">return  </span><span class="s1">eventCounterName</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Returns the string of a counters names key</span>
    <span class="s0">private </span><span class="s1">String getEventType(</span><span class="s0">int </span><span class="s1">eventId){</span>
        <span class="s1">String eventName = </span><span class="s0">null;</span>
        <span class="s0">switch </span><span class="s1">(eventId){</span>
            <span class="s0">case </span><span class="s4">0</span><span class="s1">:</span>
                <span class="s1">eventName = </span><span class="s2">&quot;eventOne&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s0">case </span><span class="s4">1</span><span class="s1">:</span>
                <span class="s1">eventName = </span><span class="s2">&quot;eventTwo&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
            <span class="s0">case </span><span class="s4">2</span><span class="s1">:</span>
                <span class="s1">eventName = </span><span class="s2">&quot;eventThree&quot;</span><span class="s0">;</span>
                <span class="s0">break;</span>
        <span class="s1">}</span>
        <span class="s0">assert </span><span class="s1">eventName != </span><span class="s0">null;</span>
        <span class="s0">return </span><span class="s1">eventName</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Remove a key/value pair from the SharedPreference</span>
    <span class="s0">public void </span><span class="s1">removeData(String key) {</span>
        <span class="s0">if</span><span class="s1">(sharedPreferences.contains(key)){</span>
            <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
            <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
            <span class="s1">editor.remove(key)</span><span class="s0">;</span>
            <span class="s1">editor.apply()</span><span class="s0">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s3">// Set the state for the editMode</span>
    <span class="s0">public void </span><span class="s1">setEditMode(</span><span class="s0">boolean </span><span class="s1">enabled){</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s1">editor.putBoolean(</span><span class="s2">&quot;editMode&quot;</span><span class="s0">, </span><span class="s1">enabled)</span><span class="s0">;</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Get the state for the editMode</span>
    <span class="s0">public boolean </span><span class="s1">getEditMode() { </span><span class="s0">return </span><span class="s1">sharedPreferences.getBoolean(</span><span class="s2">&quot;editMode&quot;</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">; </span><span class="s1">}</span>

    <span class="s3">// Set the state for the dataActivityMode</span>
    <span class="s0">public void </span><span class="s1">setDataActivityMode(</span><span class="s0">boolean </span><span class="s1">enabled){</span>
        <span class="s1">SharedPreferences.Editor editor = sharedPreferences.edit()</span><span class="s0">;</span>
        <span class="s0">assert </span><span class="s1">editor != </span><span class="s0">null;</span>
        <span class="s1">editor.putBoolean(</span><span class="s2">&quot;dataActivityMode&quot;</span><span class="s0">, </span><span class="s1">enabled)</span><span class="s0">;</span>
        <span class="s1">editor.apply()</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">// Get the state for the dataActivityMode: FALSE is showing the set counter names, TRUE shows just the counter number</span>
    <span class="s0">public boolean </span><span class="s1">getDataActivityMode() { </span><span class="s0">return </span><span class="s1">sharedPreferences.getBoolean(</span><span class="s2">&quot;dataActivityMode&quot;</span><span class="s0">, false</span><span class="s1">)</span><span class="s0">; </span><span class="s1">}</span>

    <span class="s0">public </span><span class="s1">String returnName(</span><span class="s0">int </span><span class="s1">eventId) {</span>
        <span class="s0">if </span><span class="s1">(getDataActivityMode()) {</span>
            <span class="s0">return </span><span class="s1">getEventName(eventId)</span><span class="s0">;</span>
        <span class="s1">}</span>
        <span class="s0">else </span><span class="s1">{</span>
            <span class="s0">switch </span><span class="s1">(eventId) {</span>
                <span class="s0">case </span><span class="s4">0</span><span class="s1">:</span>
                    <span class="s0">return </span><span class="s2">&quot;1&quot;</span><span class="s0">;</span>
                <span class="s0">case </span><span class="s4">1</span><span class="s1">:</span>
                    <span class="s0">return </span><span class="s2">&quot;2&quot;</span><span class="s0">;</span>
                <span class="s0">case </span><span class="s4">2</span><span class="s1">:</span>
                    <span class="s0">return </span><span class="s2">&quot;3&quot;</span><span class="s0">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>
        <span class="s0">return </span><span class="s2">&quot;Error&quot;</span><span class="s0">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
</pre>
</body>
</html>